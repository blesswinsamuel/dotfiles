# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $alt Mod1
set $super Mod4

# Colors
set_from_resource $color00 i3wm.color0 #000000
set_from_resource $color01 i3wm.color1 #ff0000
set_from_resource $color02 i3wm.color2 #00ff00
set_from_resource $color03 i3wm.color3 #ffff00
set_from_resource $color04 i3wm.color4 #0000ff
set_from_resource $color05 i3wm.color5 #ff00ff
set_from_resource $color06 i3wm.color6 #00ffff
set_from_resource $color07 i3wm.color7 #ffffff
set_from_resource $color08 i3wm.color8 #000000
set_from_resource $color09 i3wm.color9 #ff0000
set_from_resource $color10 i3wm.color10 #00ff00
set_from_resource $color11 i3wm.color11 #ffff00
set_from_resource $color12 i3wm.color12 #0000ff
set_from_resource $color13 i3wm.color13 #ff00ff
set_from_resource $color14 i3wm.color14 #00ffff
set_from_resource $color15 i3wm.color15 #ffffff
set_from_resource $color16 i3wm.color16 #ffffff
set_from_resource $color17 i3wm.color17 #ffffff
set_from_resource $color18 i3wm.color18 #ffffff
set_from_resource $color19 i3wm.color19 #ffffff
set_from_resource $color20 i3wm.color20 #ffffff
set_from_resource $color21 i3wm.color21 #ffffff

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:DejaVu Sans Mono 10

# Use Mouse+$super to drag floating windows to their wanted position
floating_modifier $super

# start a terminal
bindsym $super+Return exec i3-sensible-terminal

# kill focused window
bindsym $super+q kill
# Kill with middle click
bindsym --release button2 kill

# start dmenu (a program launcher)
bindsym $alt+space exec "rofi -show"
bindsym $super+space exec "rofi -show"
bindsym $super+d exec "rofi -show run"
bindsym $super+$alt+c exec "rofi -show clipboard -modi 'clipboard:greenclip print'"

# change focus
bindsym $super+j focus left
bindsym $super+k focus down
bindsym $super+l focus up
bindsym $super+semicolon focus right
bindsym $super+Left focus left
bindsym $super+Down focus down
bindsym $super+Up focus up
bindsym $super+Right focus right

# change workspace focus
bindsym $super+$alt+j workspace prev
bindsym $super+$alt+semicolon workspace next
bindsym $super+$alt+Left workspace prev
bindsym $super+$alt+Right workspace next
bindsym $super+$alt+Shift+Tab workspace prev
bindsym $super+$alt+Tab workspace next

# move focused window
bindsym $super+Shift+j move left
bindsym $super+Shift+k move down
bindsym $super+Shift+l move up
bindsym $super+Shift+semicolon move right
bindsym $super+Shift+Left move left
bindsym $super+Shift+Down move down
bindsym $super+Shift+Up move up
bindsym $super+Shift+Right move right

# split in horizontal orientation
bindsym $super+h split h
bindsym $super+bar split h

# split in vertical orientation
bindsym $super+v split v
bindsym $super+underscore split v

# hide horizontal/vertical split indicator bar
hide_edge_borders both

# enter fullscreen mode for the focused container
bindsym $super+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $super+s layout stacking
bindsym $super+w layout tabbed
bindsym $super+t layout tabbed
bindsym $super+e layout toggle split

# toggle tiling / floating
bindsym $super+Shift+f floating toggle
# Right click to toggle floating
bindsym button3 floating toggle

# change focus between tiling / floating windows
bindsym $super+$alt+space focus mode_toggle

# focus the parent container
bindsym $super+a focus parent

# focus the child container
bindsym $super+z focus child

# super + tab
bindsym $alt+Tab workspace back_and_forth
bindsym $alt+grave focus right
bindsym $alt+Shift+grave focus left
bindsym $super+Escape exec rofi -show window -modi window
workspace_auto_back_and_forth yes

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
# Icons:    
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $super+1 workspace $ws1
bindsym $super+2 workspace $ws2
bindsym $super+3 workspace $ws3
bindsym $super+4 workspace $ws4
bindsym $super+5 workspace $ws5
bindsym $super+6 workspace $ws6
bindsym $super+7 workspace $ws7
bindsym $super+8 workspace $ws8
bindsym $super+9 workspace $ws9
bindsym $super+0 workspace $ws10

# move focused container to workspace
bindsym $super+Shift+1 move container to workspace $ws1
bindsym $super+Shift+2 move container to workspace $ws2
bindsym $super+Shift+3 move container to workspace $ws3
bindsym $super+Shift+4 move container to workspace $ws4
bindsym $super+Shift+5 move container to workspace $ws5
bindsym $super+Shift+6 move container to workspace $ws6
bindsym $super+Shift+7 move container to workspace $ws7
bindsym $super+Shift+8 move container to workspace $ws8
bindsym $super+Shift+9 move container to workspace $ws9
bindsym $super+Shift+0 move container to workspace $ws10

# rename workspace to name in clipboard
bindsym $super+$alt+r exec i3-msg "rename workspace to $(echo "$ws1\n$ws2\n$ws3\n$ws4\n$ws5\n$ws6\n$ws7\n$ws8\n$ws9\n$ws10" | dmenu -p "Rename workspace")"

# reload the configuration file
bindsym $super+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $super+Shift+r restart

# resize window (you can also use the mouse for that)
bindsym $super+r mode "resize"
mode "resize" {
    bindsym j resize shrink width 10 px or 10 ppt
    bindsym k resize grow height 10 px or 10 ppt
    bindsym l resize shrink height 10 px or 10 ppt
    bindsym semicolon resize grow width 10 px or 10 ppt

    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $super+r mode "default"
    bindsym $super+m mode "move" focus floating
}

# Move floating window
bindsym $super+m mode "move" focus floating
mode "move" {
    bindsym $alt+Tab focus right

    bindsym j move up 20px
    bindsym k move left 20px
    bindsym l move down 20px
    bindsym semicolon move right 20px

    bindsym Up move up 20px
    bindsym Left move left 20px
    bindsym Down move down 20px
    bindsym Right move right 20px

    bindsym Escape mode "default"
    bindsym Return mode "default"
    bindsym $super+m mode "default"
    bindsym $super+r mode "resize"
}

# Print screen
bindsym Print exec maim "$HOME/Pictures/Screenshots/$(date '+%Y-%m-%d %H-%M-%S').png"
bindsym Shift+Print exec maim -s "$HOME/Pictures/Screenshots/$(date '+%Y-%m-%d %H-%M-%S').png"
bindsym Control+Print exec maim | xclip -selection clipboard -t image/png
bindsym Control+Shift+Print exec maim -s | xclip -selection clipboard -t image/png

# Window Colours
#                       border   bg       text     indicator  child_border
client.focused          $color00 $color00 $color07 $color00 $color00
client.focused_inactive $color18 $color18 $color07 $color18 $color18
client.unfocused        $color19 $color19 $color20 $color19 $color19
client.urgent           $color01 $color01 $color07 $color01 $color01
client.placeholder      $color00 $color00 $color07 $color00 $color00
client.background       $color15


# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
    status_command i3blocks -c ~/.config/i3/i3blocks.conf
    strip_workspace_numbers yes
    colors {
        background $color18
        separator  $color08
        statusline $color20

        #                   border   bg       text
        focused_workspace   $color08 $color08 $color07
        active_workspace    $color19 $color19 $color07
        inactive_workspace  $color18 $color18 $color07
        urgent_workspace    $color01 $color01 $color07
        binding_mode        $color00 $color03 $color00
    }
}

# Audio controls
# set $sink `pactl list short sinks | grep RUNNING | cut -f1`
# bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume $sink +5%
# bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume $sink -5%
# bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute $sink toggle
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -q -D pulse sset Master 5%+ && pkill -RTMIN+10 i3blocks
bindsym XF86AudioLowerVolume exec --no-startup-id amixer -q -D pulse sset Master 5%- && pkill -RTMIN+10 i3blocks
bindsym XF86AudioMute exec --no-startup-id amixer -q -D pulse sset Master toggle && pkill -RTMIN+10 i3blocks
bindsym XF86AudioNext exec --no-startup-id cmus-remote --next && pkill -RTMIN+13 i3blocks
bindsym XF86AudioPrev exec --no-startup-id cmus-remote --prev && pkill -RTMIN+13 i3blocks
bindsym XF86AudioPlay exec --no-startup-id cmus-remote --pause && pkill -RTMIN+13 i3blocks

# Sreen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 5
bindsym XF86MonBrightnessDown exec xbacklight -dec 5

exec_always --no-startup-id feh --bg-scale $HOME/Pictures/wallpaper.jpg # Set wallpaper
exec --no-startup-id compton -f -D 1 # Opacity effect for rofi
exec --no-startup-id greenclip daemon # Clipboard manager
exec --no-startup-id xmodmap ~/.Xmodmap # Key mapping
exec --no-startup-id dunst # Notifications - dunst
exec --no-startup-id nm-applet # Network manager

# Window assignments
for_window [class="Wine"] floating enable
for_window [class="Lxappearance"] floating enable
for_window [class="TeamViewer"] floating enable
for_window [class="SimpleScreenRecorder"] floating enable
for_window [class="Nm-connection-editor"] floating enable

# System logout
set $mode_system System (l) Lock, (e) Logout, (s) Suspend, (r) Reboot, (Shift+s) Shutdown
bindsym $super+Delete mode "$mode_system"
mode "$mode_system" {
    bindsym l exec --no-startup-id exec ~/.config/i3/scripts/blur-lock.sh, mode "default"
    # exit i3 (logs you out of your X session)
    bindsym e exec --no-startup-id "i3-nagbar -t warning -m 'Confirm logout' -b 'Yes, exit i3' 'i3-msg exit'", mode "default"
    bindsym s exec --no-startup-id "i3-nagbar -t warning -m 'Confirm suspend' -b 'Yes, suspend' 'pm-suspend'", mode "default"
    bindsym r exec --no-startup-id "i3-nagbar -t warning -m 'Confirm reboot' -b 'Yes, reboot' 'systemctl reboot'", mode "default"
    bindsym Shift+s exec --no-startup-id "i3-nagbar -t warning -m 'Confirm poweroff' -b 'Yes, poweroff' 'systemctl poweroff -i'", mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# Lock shortcut
bindsym $super+$alt+l exec --no-startup-id exec ~/.config/i3/scripts/blur-lock.sh

# Launch apps

set $mode_launcher Launch: [c]hrome [f]irefox [s]ubl
bindsym $super+o mode "$mode_launcher"
mode "$mode_launcher" {
    bindsym c exec chrome
    bindsym f exec firefox
    bindsym s exec subl

    bindsym Escape mode "default"
    bindsym Return mode "default"
}
